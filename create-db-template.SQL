CREATE DATABASE GOLDENCROPDISTRIBUTORS_DB;

USE GOLDENCROPDISTRIBUTORS_DB;

CREATE TABLE BRANCHES (
    BRANCH_ID VARCHAR (25) PRIMARY KEY,
    BRANCH_NAME VARCHAR (100),
    LOCATION VARCHAR (100)
);

USE GOLDENCROPDISTRIBUTORS_DB;

CREATE TABLE USERS (
    USER_ID VARCHAR (25) PRIMARY KEY,
    FULL_NAME VARCHAR (100),
    ROLE VARCHAR (100),
    PHONE VARCHAR (20),
    BRANCH_ID VARCHAR (25),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES (BRANCH_ID)
);

CREATE TABLE PRODUCES (
    PRODUCE_ID VARCHAR (25) PRIMARY KEY,
    PRODUCE_NAME VARCHAR (100),
    PRODUCE_TYPE VARCHAR (50)
);

USE GOLDENCROPDISTRIBUTORS_DB;
CREATE TABLE PROCUREMENT(
    PROCUREMENT_ID VARCHAR(25) PRIMARY KEY,
    PRODUCE_ID VARCHAR (25),
    FOREIGN KEY (PRODUCE_ID) REFERENCES PRODUCES (PRODUCE_ID),
    DEALER_NAME VARCHAR (100),
    DEALER_CONTACT VARCHAR (20),
    BRANCH_ID VARCHAR (25),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES (BRANCH_ID),
    TONNAGE DECIMAL (10,2),
    COST_PRICE DECIMAL (10,2),
    SELLING_PRICE DECIMAL (10,2),
    DATE_PURCHASED TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

USE GOLDENCROPDISTRIBUTORS_DB;
CREATE TABLE SALES (
    SALES_ID VARCHAR (25) PRIMARY KEY,
    PRODUCE_ID VARCHAR (25),
    FOREIGN KEY (PRODUCE_ID) REFERENCES PRODUCES (PRODUCE_ID),
    BRANCH_ID VARCHAR (25),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES (BRANCH_ID),
    BUYER_NAME VARCHAR (50),
    BUYER_CONTACT VARCHAR (20),
    SALES_AGENT_ID VARCHAR (25),
    FOREIGN KEY (SALES_AGENT_ID) REFERENCES USERS (USER_ID),
    TONNAGE DECIMAL (10,2),
    AMOUNT_PAID DECIMAL (10,2),
    SALES_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

USE GOLDENCROPDISTRIBUTORS_DB;
CREATE TABLE CREDIT_SALES(
    CREDIT_ID VARCHAR (25) PRIMARY KEY,
    PRODUCE_ID VARCHAR (25),
    FOREIGN KEY (PRODUCE_ID) REFERENCES PRODUCES (PRODUCE_ID),
    BRANCH_ID VARCHAR (25),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES (BRANCH_ID),
    BUYER_NAME VARCHAR (25),
    BUYER_CONTACT VARCHAR (20),
    NATIONAL_ID VARCHAR (25),
    LOCATION VARCHAR (30),
    AMOUNT_DUE DECIMAL (10,0),
    DUE_DATE DATE NOT NULL,
    STATUS VARCHAR (30),
    SALES_AGENT_ID VARCHAR (25),
    FOREIGN KEY (SALES_AGENT_ID) REFERENCES USERS ( USER_ID)
);

CREATE TABLE DEALER(
    DEALER_ID VARCHAR (25) PRIMARY KEY,
    DEALER_CONTACT VARCHAR (25),
    DEALER_EMAIL VARCHAR (100),
    LOCATION VARCHAR(50),
    TYPE VARCHAR (50),
    RATING VARCHAR (50)
);

ALTER TABLE DEALER
ADD COLUMN FULL_NAME VARCHAR (50) AFTER DAELER_ID;

CREATE TABLE BUYER(
    BUYER_ID VARCHAR (25) PRIMARY KEY,
    BUYER_NAME VARCHAR (50),
    BUYER_CONTACT VARCHAR (20),
    BUYER_EMAIL VARCHAR (100),
    LOCATION VARCHAR (50),
    TOTAL_PURCHASE INT,
    NATIONAL_ID VARCHAR (25)
);

USE GOLDENCROPDISTRIBUTORS_DB;
CREATE TABLE STOCK(
    STOCK_ID VARCHAR (25) PRIMARY KEY,
    PRODUCE_ID VARCHAR (25),
    FOREIGN KEY (PRODUCE_ID) REFERENCES PRODUCES (PRODUCE_ID),
    BRANCH_ID VARCHAR (25),
    FOREIGN KEY (BRANCH_ID) REFERENCES BRANCHES (BRANCH_ID),
    QUANTITY DECIMAL (10,2)
);

INSERT INTO BRANCHES (BRANCH_ID, BRANCH_NAME,LOCATION)
VALUES
('B001','KAMPALA BRANCH','KAMPALA'),
('B002','MBARARA BRANCH','MBARARA');

SELECT * FROM BRANCHES;


USE GOLDENCROPDISTRIBUTORS_DB;
INSERT INTO USERS (USER_ID,FULL_NAME,ROLE,PHONE,BRANCH_ID)
VALUES
('U001','MANAGER A','MANAGER','0700111222','B001'),
('U002','MANAGER B','MANAGER','0700333444','B002'),
('U003','RONALD','SALES AGENT','0700555666','B001'),
('U004','JULIET','SALES AGENT','0700777888','B001'),
('U005','SPENCER','SALES AGENT','0700999000','B002'),
('U006','PATRICIA','SALES AGENT','0700123456','B002');

SELECT * FROM USERS;

USE GOLDENCROPDISTRIBUTORS_DB;
INSERT INTO PRODUCES (PRODUCE_ID, PRODUCE_NAME, PRODUCE_TYPE)
VALUES
('P001','BEANS','CEREALS'),
('P002','GRAIN MAIZE','CEREALS'),
('P003','COWPEAS','CEREALS'),
('P004','GROUNDNUTS','CEREALS'),
('P005','RICE','CEREALS'),
('P006','SOYBEANS','CEREALS');

SELECT * FROM PRODUCES;

USE GOLDENCROPDISTRIBUTORS_DB;
INSERT INTO STOCK (STOCK_ID, PRODUCE_ID,BRANCH_ID,QUANTITY)
VALUES
('S001','P001','B001',2.0),
('S002','P002','B001',3.0),
('S003','P003','B001',1.5),
('S004','P004','B001',2.0),
('S005','P005','B001',3.7),
('S006','P006','B001',1.5),
('S007','P001','B002',4.5),
('S008','P002','B002',3.6),
('S009','P003','B002',1.8),
('S0010','P004','B002',3.5),
('S0011','P005','B002',4.5),
('S0012','P006','B002',3.0);

SELECT * FROM STOCK;

INSERT INTO PROCUREMENT(PROCUREMENT_ID, PRODUCE_ID,DEALER_NAME,DEALER_CONTACT,BRANCH_ID,TONNAGE,COST_PRICE,SELLING_PRICE,DATE_PURCHASED,TOTAL_PRICE)
VALUES
('PR001','P001','KATO FARMERS','0772345678','B001',3.50,1950000,2200000,'2025-11-05',(3.50*1950000)),
('PR002','P002','AGRO GROWERS LTD','0789987654','B001',5.00,1100000,400000,'2025-05-25',(5.00*1100000)),
('PR003','P003','NAKASEKE COPERATIVE','0753348921','B001',2.80,2100000,240000,'2025-05-28',(2.80*2100000)),
('PR004','P004','MASINDI RICE MILLERS','0701432256','B001',4.20,2600000,3000000,'2025-05-31',(4.20*2600000)),
('PR005','P005','NYAKAHAMA DEALERS','0712547812','B002',3.00,2700000,320000,'2025-06-16',(3.00*2700000)),
('PR006','P006','WESTERN AGRO SUPPLIERS','078112233','B002',6.00,1000000,350000,'2025-06-23',(6.00*1000000)),
('PR007','P001','KABALE HIGHLAND FARMERS','0757824338','B002',4.50,1850000,2150000,'2025-06-27',(4.50*1850000)),
('PROO8','P002','RWENZORI RICE SUPPLIERS','07381587879','B002',3.30,2550000,2950000,'2025-07-11',(3.30*2550000));

USE GOLDENCROPDISTRIBUTORS_DB;
ALTER TABLE PROCUREMENT
ADD COLUMN TOTAL_PRICE INT;

SELECT * FROM PROCUREMENT;

USE GOLDENCROPDISTRIBUTORS_DB;
INSERT INTO SALES(SALES_ID,PRODUCE_ID,BRANCH_ID,BUYER_NAME,BUYER_CONTACT,SALES_AGENT_ID,TONNAGE,AMOUNT_PAID,SALES_DATE)
VALUES
('SA001','P001','B001','EMMASON FRANCIS','0750112233','U003',2.5,6000000,'2025-05-28'),
('SA002','P002','B002','DENNIS WILLIAM','0788991122','U004',1.8,450000,'2025-05-25'),
('SA003','P003','B002','IAN MAFABI','0773435566','U005',3.0,900000,'2025-06-16'),
('SA004','P001','B001','JEMMIE JENNIE','0700667788','U003',1.2,290000,'2025-05-31'),
('SA005','P002','B001','OLIVIA AVA','0700556677','U004',4.0,980000,'2025-07-11');

SELECT * FROM SALES;

USE GOLDENCROPDISTRIBUTORS_DB;
INSERT INTO CREDIT_SALE(CREDIT_PRODUCE_ID,BRANCH_ID,BUYER_NAME,BUYER_C0NTACT,NATIONAL_ID,LOCATION,AMOUNT_DUE,DUE_DATE,STATUS,SALES_AGENT_ID)
VALUES
('CS001','P001','B001','EMMASON FRANCIS','0750112233','CF12345678','KAMPALA',3200000,'2025-12-10','PENDING','U003'),
('CS002','P003','B001','DENNIS WILLIAM','0788991122','CF87654321','MUKONO',450000,'2025-12-15','PENDING','U003'),
('CS003','P001','B002','IAN MAFABI','0773435566','CF555544332','ENTEBBE',2100000,'2025-12-12','PENDING','U004'),
('CS004','P002','B002','JEMMIE JENNIE','0700667788','CF44553322','MENGO',6900000,'2025-12-12','PENDING','U005'),
('CS005','P003','B001','OLIVIA AVA','0700556677','CF99887766','MBARARA',5000000,'2025-12-18','PENDING','U004');

SELECT * FROM CREDIT_SALES;

INSERT INTO BUYER(BUYER_ID,BUYER_NAME,BUYER_CONTACT,BUYER_EMAIL,LOCATION,TOTAL_PURCHASE,NATIONAL_ID)
VALUES
('B1001','EMMASON FRANCIS','0750112233','emmason@gmail.com','KAMPALA',5000000,'CF12345678'),
('B1002','DENNIS WILLIAM','0788991122','denniswilliam3@gmail.com','MUKONO',2400000,'CF87654321'),
('B1003','IAN MAFABI','0773435566','ianmafabi@gmail.com','ENTEBBE',1500000,'CF555544332'),
('B1004','JEMMIE JENNIE','0700667788','jemmiejennie@gmail.com','MENGO',7000000,'CF44553322'),
('B1005','OLIVIA AVA','0700556677','oliviaava@gmail.com','MBARARA',6100000,'CF99887766');

SELECT * FROM BUYER;


INSERT INTO DEALER(DEALER_ID,FULL_NAME,DEALER_CONTACT,DEALER_EMAIL,LOCATION,TYPE,RATING)
VALUES
('D001','KATO FARMERS','0772345678','katofarmers@gmail.com','MAGANJO','FARM SUPPLIER','4'),
('D002','AGRO GROWERS LTD','0789987654','agrogrowers@gmail.com','MATUGGA','COMPANY SUPPLIER','5'),
('D003','NAKASEKE COPERATIVE','0753348921','nakasekecoperative@gmail.com','NAKASEKE','COPERATIVE','4'),
('D004','MASINDI RICE MILLERS','0701432256','masindimillers@gmail.com','MASINDI','RICE MILLERS','3'),
('D005','NYAKAHAMA DEALERS','0712547812','nyakahamadeals@gmail.com','MBARARA','BUSINESS DEALERS','4'),
('D006','WESTERN AGRO SUPPLIERS','078112233','westernsuppliers@gmail.com','FORT PORTAL','AGRO SUPPLIERS','5'),
('D007','KABALE HIGHLAND FARMERS','0757824338','kabalehighfarmers@gmail.com','KABALE','FARMERS','4'),
('D008','RWENZORI RICE SUPPLIERS','07381587879','rwenzorisuppliers@gmail.com','KASESE','RICE SUPPLIERS','3');

SELECT * FROM DEALERS;